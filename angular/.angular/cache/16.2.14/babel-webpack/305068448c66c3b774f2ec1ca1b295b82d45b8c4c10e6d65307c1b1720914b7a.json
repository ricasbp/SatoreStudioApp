{"ast":null,"code":"import { createSocket } from 'node:dgram';\nimport { EventEmitter } from 'node:events';\nimport decode from '#decode';\nclass Server extends EventEmitter {\n  constructor(port, host = '127.0.0.1', cb) {\n    super();\n    if (typeof host === 'function') {\n      cb = host;\n      host = '127.0.0.1';\n    }\n    if (!cb) cb = () => {};\n    let decoded;\n    this.port = port;\n    this.host = host;\n    this._sock = createSocket({\n      type: 'udp4',\n      reuseAddr: true\n    });\n    this._sock.bind(port, host);\n    this._sock.on('listening', () => {\n      this.emit('listening');\n      cb();\n    });\n    this._sock.on('message', (msg, rinfo) => {\n      try {\n        decoded = decode(msg);\n      } catch (e) {\n        const error = new Error(`can't decode incoming message: ${e.message}`);\n        this.emit('error', error, rinfo);\n        return;\n      }\n      if (decoded.elements) {\n        this.emit('bundle', decoded, rinfo);\n      } else if (decoded) {\n        this.emit('message', decoded, rinfo);\n        this.emit(decoded[0], decoded, rinfo);\n      }\n    });\n  }\n  close(cb) {\n    this._sock.close(cb);\n  }\n}\nexport default Server;","map":{"version":3,"names":["createSocket","EventEmitter","decode","Server","constructor","port","host","cb","decoded","_sock","type","reuseAddr","bind","on","emit","msg","rinfo","e","error","Error","message","elements","close"],"sources":["C:/Users/tmart/Desktop/Dissertacao/TourOfHeroes/tour-of-heroes-osc.js/tour-of-heroes/node_modules/node-osc/lib/Server.mjs"],"sourcesContent":["import { createSocket } from 'node:dgram';\nimport { EventEmitter } from 'node:events';\n\nimport decode from '#decode';\n\nclass Server extends EventEmitter {\n  constructor(port, host='127.0.0.1', cb) {\n    super();\n    if (typeof host === 'function') {\n      cb = host;\n      host = '127.0.0.1';\n    }\n    if (!cb) cb = () => {};\n    let decoded;\n    this.port = port;\n    this.host = host;\n    this._sock = createSocket({\n      type: 'udp4',\n      reuseAddr: true\n    });\n    this._sock.bind(port, host);\n    this._sock.on('listening', () => {\n      this.emit('listening');\n      cb();\n    });\n    this._sock.on('message', (msg, rinfo) => {\n      try {\n        decoded = decode(msg);\n      }\n      catch (e) {\n        const error = new Error(`can't decode incoming message: ${e.message}`);\n        this.emit('error', error, rinfo);\n        return;\n      }\n      if (decoded.elements) {\n        this.emit('bundle', decoded, rinfo);\n      }\n      else if (decoded) {\n        this.emit('message', decoded, rinfo);\n        this.emit(decoded[0], decoded, rinfo);\n      }\n    });\n  }\n  close(cb) {\n    this._sock.close(cb);\n  }\n}\n\nexport default Server;\n"],"mappings":"AAAA,SAASA,YAAY,QAAQ,YAAY;AACzC,SAASC,YAAY,QAAQ,aAAa;AAE1C,OAAOC,MAAM,MAAM,SAAS;AAE5B,MAAMC,MAAM,SAASF,YAAY,CAAC;EAChCG,WAAWA,CAACC,IAAI,EAAEC,IAAI,GAAC,WAAW,EAAEC,EAAE,EAAE;IACtC,KAAK,CAAC,CAAC;IACP,IAAI,OAAOD,IAAI,KAAK,UAAU,EAAE;MAC9BC,EAAE,GAAGD,IAAI;MACTA,IAAI,GAAG,WAAW;IACpB;IACA,IAAI,CAACC,EAAE,EAAEA,EAAE,GAAGA,CAAA,KAAM,CAAC,CAAC;IACtB,IAAIC,OAAO;IACX,IAAI,CAACH,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACC,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACG,KAAK,GAAGT,YAAY,CAAC;MACxBU,IAAI,EAAE,MAAM;MACZC,SAAS,EAAE;IACb,CAAC,CAAC;IACF,IAAI,CAACF,KAAK,CAACG,IAAI,CAACP,IAAI,EAAEC,IAAI,CAAC;IAC3B,IAAI,CAACG,KAAK,CAACI,EAAE,CAAC,WAAW,EAAE,MAAM;MAC/B,IAAI,CAACC,IAAI,CAAC,WAAW,CAAC;MACtBP,EAAE,CAAC,CAAC;IACN,CAAC,CAAC;IACF,IAAI,CAACE,KAAK,CAACI,EAAE,CAAC,SAAS,EAAE,CAACE,GAAG,EAAEC,KAAK,KAAK;MACvC,IAAI;QACFR,OAAO,GAAGN,MAAM,CAACa,GAAG,CAAC;MACvB,CAAC,CACD,OAAOE,CAAC,EAAE;QACR,MAAMC,KAAK,GAAG,IAAIC,KAAK,CAAE,kCAAiCF,CAAC,CAACG,OAAQ,EAAC,CAAC;QACtE,IAAI,CAACN,IAAI,CAAC,OAAO,EAAEI,KAAK,EAAEF,KAAK,CAAC;QAChC;MACF;MACA,IAAIR,OAAO,CAACa,QAAQ,EAAE;QACpB,IAAI,CAACP,IAAI,CAAC,QAAQ,EAAEN,OAAO,EAAEQ,KAAK,CAAC;MACrC,CAAC,MACI,IAAIR,OAAO,EAAE;QAChB,IAAI,CAACM,IAAI,CAAC,SAAS,EAAEN,OAAO,EAAEQ,KAAK,CAAC;QACpC,IAAI,CAACF,IAAI,CAACN,OAAO,CAAC,CAAC,CAAC,EAAEA,OAAO,EAAEQ,KAAK,CAAC;MACvC;IACF,CAAC,CAAC;EACJ;EACAM,KAAKA,CAACf,EAAE,EAAE;IACR,IAAI,CAACE,KAAK,CAACa,KAAK,CAACf,EAAE,CAAC;EACtB;AACF;AAEA,eAAeJ,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}