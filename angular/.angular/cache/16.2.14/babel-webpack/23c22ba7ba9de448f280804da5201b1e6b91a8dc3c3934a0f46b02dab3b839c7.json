{"ast":null,"code":"/*\n * osc.js: An Open Sound Control library for JavaScript that works in both the browser and Node.js\n *\n * Cross-Platform Web Socket client transport for osc.js.\n *\n * Copyright 2014-2016, Colin Clark\n * Licensed under the MIT and GPL 3 licenses.\n */\n\n/*global WebSocket, require*/\n\nvar osc = osc || require(\"../osc.js\");\n(function () {\n  \"use strict\";\n\n  osc.WebSocket = typeof WebSocket !== \"undefined\" ? WebSocket : require(\"ws\");\n  osc.WebSocketPort = function (options) {\n    osc.Port.call(this, options);\n    this.on(\"open\", this.listen.bind(this));\n    this.socket = options.socket;\n    if (this.socket) {\n      if (this.socket.readyState === 1) {\n        osc.WebSocketPort.setupSocketForBinary(this.socket);\n        this.emit(\"open\", this.socket);\n      } else {\n        this.open();\n      }\n    }\n  };\n  var p = osc.WebSocketPort.prototype = Object.create(osc.Port.prototype);\n  p.constructor = osc.WebSocketPort;\n  p.open = function () {\n    if (!this.socket || this.socket.readyState > 1) {\n      this.socket = new osc.WebSocket(this.options.url);\n    }\n    osc.WebSocketPort.setupSocketForBinary(this.socket);\n    var that = this;\n    this.socket.onopen = function () {\n      that.emit(\"open\", that.socket);\n    };\n    this.socket.onerror = function (err) {\n      that.emit(\"error\", err);\n    };\n  };\n  p.listen = function () {\n    var that = this;\n    this.socket.onmessage = function (e) {\n      that.emit(\"data\", e.data, e);\n    };\n    this.socket.onclose = function (e) {\n      that.emit(\"close\", e);\n    };\n    that.emit(\"ready\");\n  };\n  p.sendRaw = function (encoded) {\n    if (!this.socket || this.socket.readyState !== 1) {\n      osc.fireClosedPortSendError(this);\n      return;\n    }\n    this.socket.send(encoded);\n  };\n  p.close = function (code, reason) {\n    this.socket.close(code, reason);\n  };\n  osc.WebSocketPort.setupSocketForBinary = function (socket) {\n    socket.binaryType = osc.isNode ? \"nodebuffer\" : \"arraybuffer\";\n  };\n})();","map":{"version":3,"names":["osc","require","WebSocket","WebSocketPort","options","Port","call","on","listen","bind","socket","readyState","setupSocketForBinary","emit","open","p","prototype","Object","create","constructor","url","that","onopen","onerror","err","onmessage","e","data","onclose","sendRaw","encoded","fireClosedPortSendError","send","close","code","reason","binaryType","isNode"],"sources":["C:/Users/tmart/Desktop/Dissertacao/TourOfHeroes/tour-of-heroes-osc.js/tour-of-heroes/node_modules/osc/src/platforms/osc-websocket-client.js"],"sourcesContent":["/*\n * osc.js: An Open Sound Control library for JavaScript that works in both the browser and Node.js\n *\n * Cross-Platform Web Socket client transport for osc.js.\n *\n * Copyright 2014-2016, Colin Clark\n * Licensed under the MIT and GPL 3 licenses.\n */\n\n/*global WebSocket, require*/\n\nvar osc = osc || require(\"../osc.js\");\n\n(function () {\n\n    \"use strict\";\n\n    osc.WebSocket = typeof WebSocket !== \"undefined\" ? WebSocket : require (\"ws\");\n\n    osc.WebSocketPort = function (options) {\n        osc.Port.call(this, options);\n        this.on(\"open\", this.listen.bind(this));\n\n        this.socket = options.socket;\n        if (this.socket) {\n            if (this.socket.readyState === 1) {\n                osc.WebSocketPort.setupSocketForBinary(this.socket);\n                this.emit(\"open\", this.socket);\n            } else {\n                this.open();\n            }\n        }\n    };\n\n    var p = osc.WebSocketPort.prototype = Object.create(osc.Port.prototype);\n    p.constructor = osc.WebSocketPort;\n\n    p.open = function () {\n        if (!this.socket || this.socket.readyState > 1) {\n            this.socket = new osc.WebSocket(this.options.url);\n        }\n\n        osc.WebSocketPort.setupSocketForBinary(this.socket);\n\n        var that = this;\n        this.socket.onopen = function () {\n            that.emit(\"open\", that.socket);\n        };\n\n        this.socket.onerror = function (err) {\n            that.emit(\"error\", err);\n        };\n    };\n\n    p.listen = function () {\n        var that = this;\n        this.socket.onmessage = function (e) {\n            that.emit(\"data\", e.data, e);\n        };\n\n        this.socket.onclose = function (e) {\n            that.emit(\"close\", e);\n        };\n\n        that.emit(\"ready\");\n    };\n\n    p.sendRaw = function (encoded) {\n        if (!this.socket || this.socket.readyState !== 1) {\n            osc.fireClosedPortSendError(this);\n            return;\n        }\n\n        this.socket.send(encoded);\n    };\n\n    p.close = function (code, reason) {\n        this.socket.close(code, reason);\n    };\n\n    osc.WebSocketPort.setupSocketForBinary = function (socket) {\n        socket.binaryType = osc.isNode ? \"nodebuffer\" : \"arraybuffer\";\n    };\n\n}());\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}