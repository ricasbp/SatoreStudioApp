{"ast":null,"code":"'use strict';\n\nvar node_dgram = require('node:dgram');\nvar node_events = require('node:events');\nvar decode = require('#decode');\nclass Server extends node_events.EventEmitter {\n  constructor(port, host = '127.0.0.1', cb) {\n    super();\n    if (typeof host === 'function') {\n      cb = host;\n      host = '127.0.0.1';\n    }\n    if (!cb) cb = () => {};\n    let decoded;\n    this.port = port;\n    this.host = host;\n    this._sock = node_dgram.createSocket({\n      type: 'udp4',\n      reuseAddr: true\n    });\n    this._sock.bind(port, host);\n    this._sock.on('listening', () => {\n      this.emit('listening');\n      cb();\n    });\n    this._sock.on('message', (msg, rinfo) => {\n      try {\n        decoded = decode(msg);\n      } catch (e) {\n        const error = new Error(`can't decode incoming message: ${e.message}`);\n        this.emit('error', error, rinfo);\n        return;\n      }\n      if (decoded.elements) {\n        this.emit('bundle', decoded, rinfo);\n      } else if (decoded) {\n        this.emit('message', decoded, rinfo);\n        this.emit(decoded[0], decoded, rinfo);\n      }\n    });\n  }\n  close(cb) {\n    this._sock.close(cb);\n  }\n}\nmodule.exports = Server;","map":{"version":3,"names":["node_dgram","require","node_events","decode","Server","EventEmitter","constructor","port","host","cb","decoded","_sock","createSocket","type","reuseAddr","bind","on","emit","msg","rinfo","e","error","Error","message","elements","close","module","exports"],"sources":["C:/Users/tmart/Desktop/Dissertacao/TourOfHeroes/tour-of-heroes-osc.js/tour-of-heroes/node_modules/node-osc/dist/lib/Server.js"],"sourcesContent":["'use strict';\n\nvar node_dgram = require('node:dgram');\nvar node_events = require('node:events');\nvar decode = require('#decode');\n\nclass Server extends node_events.EventEmitter {\n  constructor(port, host='127.0.0.1', cb) {\n    super();\n    if (typeof host === 'function') {\n      cb = host;\n      host = '127.0.0.1';\n    }\n    if (!cb) cb = () => {};\n    let decoded;\n    this.port = port;\n    this.host = host;\n    this._sock = node_dgram.createSocket({\n      type: 'udp4',\n      reuseAddr: true\n    });\n    this._sock.bind(port, host);\n    this._sock.on('listening', () => {\n      this.emit('listening');\n      cb();\n    });\n    this._sock.on('message', (msg, rinfo) => {\n      try {\n        decoded = decode(msg);\n      }\n      catch (e) {\n        const error = new Error(`can't decode incoming message: ${e.message}`);\n        this.emit('error', error, rinfo);\n        return;\n      }\n      if (decoded.elements) {\n        this.emit('bundle', decoded, rinfo);\n      }\n      else if (decoded) {\n        this.emit('message', decoded, rinfo);\n        this.emit(decoded[0], decoded, rinfo);\n      }\n    });\n  }\n  close(cb) {\n    this._sock.close(cb);\n  }\n}\n\nmodule.exports = Server;\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,UAAU,GAAGC,OAAO,CAAC,YAAY,CAAC;AACtC,IAAIC,WAAW,GAAGD,OAAO,CAAC,aAAa,CAAC;AACxC,IAAIE,MAAM,GAAGF,OAAO,CAAC,SAAS,CAAC;AAE/B,MAAMG,MAAM,SAASF,WAAW,CAACG,YAAY,CAAC;EAC5CC,WAAWA,CAACC,IAAI,EAAEC,IAAI,GAAC,WAAW,EAAEC,EAAE,EAAE;IACtC,KAAK,CAAC,CAAC;IACP,IAAI,OAAOD,IAAI,KAAK,UAAU,EAAE;MAC9BC,EAAE,GAAGD,IAAI;MACTA,IAAI,GAAG,WAAW;IACpB;IACA,IAAI,CAACC,EAAE,EAAEA,EAAE,GAAGA,CAAA,KAAM,CAAC,CAAC;IACtB,IAAIC,OAAO;IACX,IAAI,CAACH,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACC,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACG,KAAK,GAAGX,UAAU,CAACY,YAAY,CAAC;MACnCC,IAAI,EAAE,MAAM;MACZC,SAAS,EAAE;IACb,CAAC,CAAC;IACF,IAAI,CAACH,KAAK,CAACI,IAAI,CAACR,IAAI,EAAEC,IAAI,CAAC;IAC3B,IAAI,CAACG,KAAK,CAACK,EAAE,CAAC,WAAW,EAAE,MAAM;MAC/B,IAAI,CAACC,IAAI,CAAC,WAAW,CAAC;MACtBR,EAAE,CAAC,CAAC;IACN,CAAC,CAAC;IACF,IAAI,CAACE,KAAK,CAACK,EAAE,CAAC,SAAS,EAAE,CAACE,GAAG,EAAEC,KAAK,KAAK;MACvC,IAAI;QACFT,OAAO,GAAGP,MAAM,CAACe,GAAG,CAAC;MACvB,CAAC,CACD,OAAOE,CAAC,EAAE;QACR,MAAMC,KAAK,GAAG,IAAIC,KAAK,CAAE,kCAAiCF,CAAC,CAACG,OAAQ,EAAC,CAAC;QACtE,IAAI,CAACN,IAAI,CAAC,OAAO,EAAEI,KAAK,EAAEF,KAAK,CAAC;QAChC;MACF;MACA,IAAIT,OAAO,CAACc,QAAQ,EAAE;QACpB,IAAI,CAACP,IAAI,CAAC,QAAQ,EAAEP,OAAO,EAAES,KAAK,CAAC;MACrC,CAAC,MACI,IAAIT,OAAO,EAAE;QAChB,IAAI,CAACO,IAAI,CAAC,SAAS,EAAEP,OAAO,EAAES,KAAK,CAAC;QACpC,IAAI,CAACF,IAAI,CAACP,OAAO,CAAC,CAAC,CAAC,EAAEA,OAAO,EAAES,KAAK,CAAC;MACvC;IACF,CAAC,CAAC;EACJ;EACAM,KAAKA,CAAChB,EAAE,EAAE;IACR,IAAI,CAACE,KAAK,CAACc,KAAK,CAAChB,EAAE,CAAC;EACtB;AACF;AAEAiB,MAAM,CAACC,OAAO,GAAGvB,MAAM","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}